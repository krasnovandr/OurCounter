@{
    ViewBag.Title = "";
}
@model OurCounter.Models.ImageModel
<link href="~/Content/flipclock.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.1.0.js"></script>
<script>
    var clock;

    $(document).ready(function () {
        var clock;
        // Grab the current date
        var currentDate = new Date();

        // Set some date in the past. In this case, it's always been since Jan 1
        var pastDate = new Date(2013, 8, 18, 20, 0, 0);

        // Calculate the difference in seconds between the future and current date
        var diff = currentDate.getTime() / 1000 - pastDate.getTime() / 1000;

        clock = $('#clock').FlipClock(diff, {
            clockFace: 'DailyCounter',
            autoStart: false,
            language: 'russian',
            callbacks: {
                stop: function () {
                    $('.message').html('');
                }
            },

        });

        clock.setCountdown();
        clock.start();

        $("#ourDate").change(function () {
            var oneDay = 24 * 60 * 60 * 1000;
            var secondDate = new Date($(this).val());
            var diffDays = Math.round((secondDate.getTime() - pastDate.getTime()) / (oneDay));
            $("#resultDays").text(diffDays);
        });

        $("#dayText").change(function () {
            var dayToTrack = $("#dayText").val();
            var futureDate = addDays(pastDate, dayToTrack);
            $("#calculatedDate").val(futureDate.toISOString().substring(0, 10));
        });

        function addDays(date, days) {
            var result = new Date(date);
            result.setDate(result.getDate() + parseInt(days));
            return result;
        }
    });

</script>
<div class="container container-fluid">
    <div class="row">
        <h2>Будем вести наш счет тут!</h2>
        <div class="col-md-9">
            <div id="clock"></div>
            <div class="message"></div>
        </div>
    </div>
    <div class="row" style="margin-top: 20px">
        <div class="col-md-6">
            <input type="date" id="ourDate" />
            <h3 id="resultDays"></h3>
        </div>
        <div class="col-md-6">
            <label for="dayText">Наш денек:</label>
            <input type="number" id="dayText" />
            <input type="date" id="calculatedDate" />
        </div>
    </div>
</div>




